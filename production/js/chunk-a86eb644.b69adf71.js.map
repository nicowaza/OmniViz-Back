{"version":3,"sources":["webpack:///./src/views/Timeline.vue?4458","webpack:///./src/views/Timeline.vue?be0c","webpack:///src/views/Timeline.vue","webpack:///./src/views/Timeline.vue?1189","webpack:///./src/views/Timeline.vue?bc00"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Timeline_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Timeline_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticStyle","display","flex-direction","justify-content","align-items","height","overflow-x","width","position","staticClass","attrs","name","activeIndexStyle","backgroundColor","key","style","_v","_s","username","on","click","$event","closeModal","_l","tag","index","id","showModal","staticRenderFns","Timelinevue_type_script_lang_js_","data","roomInfos","classDuration","tags","activeIndex","mounted","$store","state","route","params","roomID","fetchRoom","computed","tagsStyle","_this","map","Object","objectSpread","color","top","left","concat","time","startClass","cursor","tagModal","_this2","user","userID","justifyContent","borderRadius","methods","_this3","http","get","then","_ref","err","console","log","status","roomData","_roomData$content1$","content1","endClass","authorID","authorFirstname","authorLastname","authorUsername","title","push","content2","catch","activeStyle","splice","views_Timelinevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-a86eb644.b69adf71.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeline.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeline.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"justify-content\":\"flex-end\",\"align-items\":\"center\",\"height\":\"100%\"}},[_c('div',{staticStyle:{\"overflow-x\":\"scroll\",\"width\":\"80%\",\"position\":\"relative\",\"height\":\"28%\"}},[_c('div',{staticClass:\"timeline\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(this.activeIndexStyle[0].backgroundColor === 'blue')?_c('div',{key:\"blue\",style:(this.activeIndexStyle[0])},[_c('p',{staticClass:\"centerText\"},[_vm._v(_vm._s(this.activeIndexStyle[0].username)+\" had a question\")]),_c('v-icon',{staticClass:\"alignCancel\",on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(\"cancel\")])],1):(this.activeIndexStyle[0].backgroundColor === 'red')?_c('div',{key:\"red\",style:(this.activeIndexStyle[0])},[_c('p',{staticClass:\"centerText\"},[_vm._v(_vm._s(this.activeIndexStyle[0].username)+\" didn't understand\")]),_c('v-icon',{staticClass:\"alignCancel\",on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(\"cancel\")])],1):(this.activeIndexStyle[0].backgroundColor === 'yellow')?_c('div',{key:\"yellow\",style:(this.activeIndexStyle[0])},[_c('p',{staticClass:\"centerText\"},[_vm._v(_vm._s(this.activeIndexStyle[0].username)+\" needs more infos\")]),_c('v-icon',{staticClass:\"alignCancel\",on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(\"cancel\")])],1):(this.activeIndexStyle[0].backgroundColor === 'green')?_c('div',{key:\"green\",style:(this.activeIndexStyle[0])},[_c('p',{staticClass:\"centerText\"},[_vm._v(_vm._s(this.activeIndexStyle[0].username)+\" loves it ! \")]),_c('v-icon',{staticClass:\"alignCancel\",on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(\"cancel\")])],1):_c('div',{style:(this.activeIndexStyle[0])})]),_vm._l((_vm.tagsStyle),function(tag,index){return _c('div',{key:tag.id,style:(tag),on:{\"click\":function($event){return _vm.showModal(index)}}})})],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div style=\"display: flex; flex-direction: column; justify-content: flex-end; align-items: center; height: 100%;\">\n      <div style=\"overflow-x: scroll; width: 80%; position: relative; height: 28%\">\n        <div class=\"timeline\">\n          <transition name=\"fade\">\n            <div v-if=\"this.activeIndexStyle[0].backgroundColor === 'blue'\" key=\"blue\" :style=\"this.activeIndexStyle[0]\">\n              <p class=\"centerText\">{{ this.activeIndexStyle[0].username }} had a question</p>\n              <v-icon class=\"alignCancel\" v-on:click=\"closeModal()\">cancel</v-icon>\n            </div>\n            <div v-else-if=\"this.activeIndexStyle[0].backgroundColor === 'red'\" key=\"red\" :style=\"this.activeIndexStyle[0]\">\n              <p class=\"centerText\">{{ this.activeIndexStyle[0].username }} didn't understand</p>\n              <v-icon class=\"alignCancel\" v-on:click=\"closeModal()\">cancel</v-icon>\n            </div>\n            <div v-else-if=\"this.activeIndexStyle[0].backgroundColor === 'yellow'\" key=\"yellow\" :style=\"this.activeIndexStyle[0]\">\n              <p class=\"centerText\">{{ this.activeIndexStyle[0].username }} needs more infos</p>\n              <v-icon class=\"alignCancel\" v-on:click=\"closeModal()\">cancel</v-icon>\n            </div>\n            <div v-else-if=\"this.activeIndexStyle[0].backgroundColor === 'green'\" key=\"green\" :style=\"this.activeIndexStyle[0]\">\n              <p class=\"centerText\">{{ this.activeIndexStyle[0].username }} loves it ! </p>\n              <v-icon class=\"alignCancel\" v-on:click=\"closeModal()\">cancel</v-icon>\n            </div>\n            <div v-else :style=\"this.activeIndexStyle[0]\"></div>\n          </transition>\n          <div v-for=\"(tag, index) in tagsStyle\" :key=\"tag.id\" :style=\"tag\" v-on:click=\"showModal(index)\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HTTP from '../http';\n\nexport default {\n  name: 'Timeline',\n  data() {\n    return {\n      roomInfos: [],\n      classDuration: '',\n      tags: [],\n      activeIndex: '',\n      activeIndexStyle: [{}],\n    };\n  },\n\n  mounted() {\n    // permet de récupérer l'id de la room présente dans l'url\n    const id = this.$store.state.route.params.roomID;\n    this.fetchRoom(id);\n  },\n\n  computed: {\n    tagsStyle() {\n      return this.tags.map(tag => ({\n        ...tag,\n        backgroundColor: tag.color,\n        top: '-30px',\n        left: `${(((tag.time - this.roomInfos[0].startClass) * (1800 / this.classDuration)) / 18)}%`, // calcul de la position du tag en pourcentage par rapport à son timestamp : (tag timestamp- timestamp du début du cours) * (width de la div de la timeline (ici définie à 1800px) / durée du cours en secondes). Et ce résultat est divisé par la width de la div / 100 pour obtenir un nombre correspondant à un pourcentage de distance par rapport au début de la div donc du cours\n        height: '20px',\n        width: '5px',\n        position: 'absolute',\n        cursor: 'pointer',\n      }));\n    },\n\n    tagModal() {\n      return this.tags.map(tag => ({\n        ...tag,\n        color: 'black',\n        backgroundColor: tag.color,\n        user: `${tag.userID}`,\n        top: '-125px',\n        height: '75px',\n        width: '130px',\n\n        position: 'absolute',\n        left: `${(((tag.time - this.roomInfos[0].startClass) * (1800 / this.classDuration) - 62.5) / 18)}%`,\n        display: 'flex',\n        justifyContent: 'space-around',\n        borderRadius: '15px',\n      }));\n    },\n  },\n\n  methods: {\n    fetchRoom(roomID) {\n      HTTP().get(`/rooms/timeline/${roomID}`, {\n\n      })\n        .then(({ data, err }) => {\n          if (err) {\n            console.log(err);\n          } else if (data.status === 200) {\n            console.log('data', data);\n            const roomData = data;\n            console.log('roomData', roomData);\n            const {\n              startClass, endClass, authorID, authorFirstname, authorLastname, authorUsername, title,\n            } = roomData.content1[0];\n            console.log(startClass);\n            console.log(endClass);\n            this.roomInfos.push({\n              roomID,\n              authorID,\n              authorFirstname,\n              authorLastname,\n              authorUsername,\n              title,\n              startClass,\n              endClass,\n            });\n            const classDuration = endClass - startClass;\n            this.classDuration = classDuration;\n\n            this.tags = roomData.content2;\n\n            console.log('this tags before', this.tags);\n\n            // this.newTagArray();\n            // console.log('this tag after', this.tags);\n          }\n        })\n        .catch(() => {\n          // ne marche pas...les erreurs sont attrapées dans le else if précédent...to fix\n\n        });\n    },\n\n    // affiche le modal correspondant au tag cliqué\n    showModal(index) {\n      this.activeIndex = index;\n      // stocke l'élément du tableau de modal correspondant à l'index de l'élément séléctionné dans le tableau des tags\n      const activeStyle = this.tagModal[this.activeIndex];\n      // l'élément isolé est pousser dans le tableau activeIndexStyle si celui ci est vide, sinon on remplace l'élément présent par le nvl élément séléctionné\n      if (this.activeIndexStyle[0]) {\n        this.activeIndexStyle.splice(0, 1, activeStyle);\n      } else this.activeIndexStyle.push(activeStyle);\n\n      this.activeIndexStyle[0].display = 'flex';\n    },\n\n    // ferme le modal\n    closeModal() {\n      this.activeIndexStyle[0].display = 'none';\n    },\n  },\n};\n</script>\n\n<style>\n  .timeline {\n      position: relative;\n      top: 60%;\n      border: 1px solid #000;\n      width: 1800px;\n      margin: auto;\n      margin-top: 1%;\n      margin-bottom: 5%;\n  }\n  .alignCancel {\n    padding: 0 5px 25px 0;\n    cursor: pointer;\n    color: black\n  }\n  .centerText {\n    margin: 15px 5px;\n    text-align: center;\n  }\n  .fade-enter-active, .fade-leave-active {\n  transition: opacity 1s;\n  }\n\n  .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timeline.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timeline.vue?vue&type=template&id=3d848f88&\"\nimport script from \"./Timeline.vue?vue&type=script&lang=js&\"\nexport * from \"./Timeline.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timeline.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a86eb644"],{"1fab":function(t,e,i){},"715b":function(t,e,i){"use strict";var s=i("1fab"),n=i.n(s);n.a},f67a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{height:"inherit"}},[i("div",{staticClass:"text-center",staticStyle:{padding:"40px 9% 0"}},[i("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{color:"#463e54"}},s),[i("v-icon",{staticStyle:{color:"#f6f6e5"},attrs:{left:""}},[t._v("expand_more")]),i("span",{staticStyle:{color:"#f6f6e5"}},[t._v("Participants")])],1)]}}])},["teacher"===this.user.role?i("v-list",[i("v-list-tile",{on:{click:function(e){return t.filterTagsReset()}}},[t._v("all")])],1):t._e(),t._l(t.participants,function(e){return i("v-list",{key:e.id},[i("v-list-tile",{on:{click:function(i){return t.filterTags(e.userID)}}},[t._v(t._s(e.username))])],1)})],2)],1),i("div",{staticStyle:{display:"flex","justify-content":"center",color:"#f6f6e5"}},[i("div",{staticStyle:{padding:"0 9%","font-size":"30px","margin-top":"5vh"}},[t._v(t._s(t.formattedTime))])]),i("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-end","align-items":"center",height:"40%"}},[i("div",{staticStyle:{"overflow-x":"auto","text-align":"center",width:"80%",position:"relative",height:"225px"}},[i("div",{staticClass:"timeline"},[i("transition",{attrs:{name:"fade"}},["blue"===this.activeIndexStyle[0].backgroundColor?i("div",{key:"blue",style:this.activeIndexStyle[0]},[i("div",[i("p",{staticStyle:{padding:"20px 10px 0"}},[t._v("At "+t._s(t.moment.utc(1e3*(this.activeIndexStyle[0].time-this.roomInfos[0].startClass)).format("HH:mm:ss"))+":")]),i("p",[t._v(t._s(this.activeIndexStyle[0].username))]),i("p",{staticStyle:{padding:"0 10px 10px"}},[t._v("had a question")])]),i("v-icon",{staticClass:"alignCancel",on:{click:function(e){return t.closeModal()}}},[t._v("cancel")])],1):"red"===this.activeIndexStyle[0].backgroundColor?i("div",{key:"red",style:this.activeIndexStyle[0]},[i("div",[i("p",{staticStyle:{padding:"20px 10px 0"}},[t._v("At "+t._s(t.moment.utc(1e3*(this.activeIndexStyle[0].time-this.roomInfos[0].startClass)).format("HH:mm:ss"))+":")]),i("p",[t._v(t._s(this.activeIndexStyle[0].username))]),i("p",{staticStyle:{padding:"0 10px 10px"}},[t._v("didn't understand")])]),i("v-icon",{staticClass:"alignCancel",on:{click:function(e){return t.closeModal()}}},[t._v("cancel")])],1):"yellow"===this.activeIndexStyle[0].backgroundColor?i("div",{key:"yellow",style:this.activeIndexStyle[0]},[i("div",[i("p",{staticStyle:{padding:"20px 10px 0"}},[t._v("At "+t._s(t.moment.utc(1e3*(this.activeIndexStyle[0].time-this.roomInfos[0].startClass)).format("HH:mm:ss"))+":")]),i("p",[t._v(t._s(this.activeIndexStyle[0].username))]),i("p",{staticStyle:{padding:"0 10px 10px"}},[t._v("needs more infos")])]),i("v-icon",{staticClass:"alignCancel",on:{click:function(e){return t.closeModal()}}},[t._v("cancel")])],1):"green"===this.activeIndexStyle[0].backgroundColor?i("div",{key:"green",style:this.activeIndexStyle[0]},[i("div",[i("p",{staticStyle:{padding:"20px 10px 0"}},[t._v("At "+t._s(t.moment.utc(1e3*(this.activeIndexStyle[0].time-this.roomInfos[0].startClass)).format("HH:mm:ss"))+":")]),i("p",[t._v(t._s(this.activeIndexStyle[0].username))]),i("p",{staticStyle:{padding:"0 10px 10px"}},[t._v("loves it !")])]),i("v-icon",{staticClass:"alignCancel",on:{click:function(e){return t.closeModal()}}},[t._v("cancel")])],1):i("div",{style:this.activeIndexStyle[0]})]),t._l(t.tagsStyle,function(e,s){return i("div",{key:e.id,style:e,on:{click:function(e){return t.showModal(s)}}})}),i("v-progress-linear",{attrs:{height:"15",value:t.slider,striped:"",color:"light-blue",reactive:""}})],2)])]),i("div",{staticStyle:{display:"flex","justify-content":"center",margin:"20px 9%"}},[i("v-btn",{staticClass:"success btnrectangle",attrs:{disabled:"running"===this.timerState},on:{click:function(e){return t.start()}}},[t._v("\n       Play\n       ")]),i("v-btn",{staticClass:"info  btnrectangle",attrs:{disabled:"stopped"===this.timerState||"paused"===this.timerState},on:{click:function(e){return t.pause()}}},[t._v("\n       Pause\n       ")]),i("v-btn",{staticClass:"error  btnrectangle",attrs:{disabled:"stopped"===this.timerState},on:{click:function(e){return t.stop()}}},[t._v("\n       Stop\n       ")])],1)])])},n=[],a=i("cebc"),r=i("2f62"),o=i("ba6a"),c={name:"Timeline",data:function(){return{roomInfos:[],classDuration:"",tags:[],tagsRef:[],activeIndex:"",activeIndexStyle:[{}],participants:[],timerState:"stopped",currentTimer:0,formattedTime:"00:00:00",ticker:void 0,sliderTicker:void 0,slider:0}},mounted:function(){var t=this.$store.state.route.params.roomID;this.fetchRoom(t),this.fetchParticipants(t)},computed:Object(a["a"])({},Object(r["e"])("authentication",["user"]),{tagsStyle:function(){var t=this;return this.tags.map(function(e){return Object(a["a"])({},e,{backgroundColor:e.color,top:"-30px",left:"".concat((e.time-t.roomInfos[0].startClass)*(5400/t.classDuration)/54,"%"),height:"20px",width:"5px",position:"absolute",cursor:"pointer"})})},tagModal:function(){var t=this;return this.tags.map(function(e){return Object(a["a"])({},e,{color:"black",backgroundColor:e.color,user:"".concat(e.userID),top:"-160px",height:"100px",width:"250px",position:"absolute",left:"".concat(((e.time-t.roomInfos[0].startClass)*(5400/t.classDuration)-125)/54,"%"),display:"flex",justifyContent:"space-around",borderRadius:"15px"})})}}),methods:{fetchRoom:function(t){var e=this;Object(o["a"])().get("/rooms/timeline/".concat(t),{}).then(function(i){var s=i.data,n=i.err;if(n)console.log(n);else if(200===s.status){var a=s,r=a.content2;e.tagsRef=r;var o=a.content1[0],c=o.startClass,l=o.endClass,u=o.authorID,d=o.authorFirstname,h=o.authorLastname,p=o.authorUsername,v=o.title;e.roomInfos.push({roomID:t,authorID:u,authorFirstname:d,authorLastname:h,authorUsername:p,title:v,startClass:c,endClass:l});var f=l-c;e.classDuration=f,"teacher"===e.user.role?(e.tags=r,console.log("this tags teacher",e.tags)):"student"===e.user.role&&(e.tags=r.filter(function(t){return t.userID===e.user.userID}),console.log("userID",e.user.userID),console.log("student tags",e.tags))}}).catch(function(){})},fetchParticipants:function(t){var e=this;Object(o["a"])().get("/rooms/participants/".concat(t),{}).then(function(t){var i=t.data,s=t.err;if(s)console.log(s);else if(200===i.status){var n=i.results;"teacher"===e.user.role?(e.participants=n,console.log("techaer role this particpants",e.particiants)):"student"===e.user.role&&(e.participants=n.filter(function(t){return t.userID===e.user.userID}),console.log("array particpants filtered",e.participants))}}).catch(function(){})},showModal:function(t){this.activeIndex=t;var e=this.tagModal[this.activeIndex];this.activeIndexStyle[0]?this.activeIndexStyle.splice(0,1,e):this.activeIndexStyle.push(e),this.activeIndexStyle[0].display="flex"},closeModal:function(){this.activeIndexStyle[0].display="none"},filterTags:function(t){console.log("participantsID",t),this.tags=this.tagsRef,this.tags=this.tags.filter(function(e){return e.userID===t}),console.log("new tags",this.tags)},filterTagsReset:function(){this.tags=this.tagsRef},start:function(){"running"!==this.timerState&&(this.tick(),this.sliderTick(),this.timerState="running")},pause:function(){window.clearInterval(this.ticker),window.clearInterval(this.sliderTicker),this.timerState="paused"},stop:function(){window.clearInterval(this.ticker),window.clearInterval(this.sliderTicker),this.currentTimer=0,this.slider=0,this.formattedTime="00:00:00",this.timerState="stopped"},tick:function(){var t=this;this.ticker=setInterval(function(){t.currentTimer+=1,t.formattedTime=t.formatTime(t.currentTimer)},1e3),this.currentTimer===this.classDuration&&this.pause()},formatTime:function(t){var e=new Date(null);e.setSeconds(t);var i=e.toISOString().substr(11,8);return i},sliderTick:function(){var t=this;this.sliderTicker=setInterval(function(){t.slider+=1/30},100)}}},l=c,u=(i("715b"),i("2877")),d=Object(u["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-a86eb644.b419d25b.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-141c32bb"],{"024b":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"fill-height":""}},[s("v-layout",{staticStyle:{height:"auto"},attrs:{"align-center":"","justify-center":""}},[s("TeacherDisplay")],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("transition",{attrs:{name:"fade"}},[this.confirm?o("alert",[o("div",{attrs:{slot:"confirmMessage"},slot:"confirmMessage"},[t._v(t._s(t.confirm)+" ")]),o("div",{attrs:{slot:"alert-controls"},slot:"alert-controls"},[o("v-btn",{staticClass:"v-btn v-btn--flat v-btn--text theme--light v-size--default green--text text--darken-1",on:{click:function(e){return t.closeConfirmModal()}}},[t._v("non")]),o("v-btn",{staticClass:"v-btn v-btn--flat v-btn--text theme--light v-size--default green--text text--darken-1",on:{click:function(e){return t.closeRoom()}}},[t._v("oui")])],1)]):t._e()],1),o("div",{attrs:{id:"1s"}},[o("v-container",{staticStyle:{display:"flex","justify-content":"space-around",color:"#eaeada"}},[o("div",[o("h3",[t._v("TEACHER: ")]),o("p",[t._v(t._s(this.rooms[0].authorFirstname)+" "+t._s(this.rooms[0].authorLastname))]),o("h3",[t._v("CLASS:  ")]),o("p",[t._v(t._s(this.rooms[0].title))])]),o("v-btn",{attrs:{id:"closeBtn"},on:{click:function(e){return t.openConfirmModal()}}},[o("v-icon",{staticStyle:{color:"black"}},[t._v("clear")])],1)],1),o("v-container",{staticClass:"test",staticStyle:{height:"100%",display:"flex","justify-content":"space-around","flex-wrap":"wrap","margin-top":"0px"}},[o("div",[t.alerts.includes("red")?o("div",[o("v-img",{staticClass:"wiggle",attrs:{height:"200px",width:"200px",src:"/img/icons/bell-alarm_04_red.png"}})],1):o("div",[o("v-img",{staticClass:"imgSize",attrs:{src:"/img/icons/bell-alarm_04_green.png"}})],1),o("audio",{attrs:{id:"audio",controls:"",loop:""}},[o("source",{attrs:{src:s("06bf"),type:"audio/mpeg"}}),t._v("\n        Your browser does not support the audio element.\n        ")]),o("br"),o("br")]),o("div",{staticClass:"elevation-24",attrs:{id:"chatbox"}},t._l(t.messages,function(e){return o("div",{key:e.id,staticStyle:{padding:"5px 0"}},[o("p",{staticStyle:{margin:"5px 0"}},[t._v(t._s(e))])])}),0)])],1)],1)},a=[],i=s("0a0d"),c=s.n(i),l=(s("ac6a"),s("cebc")),u=s("2f62"),m=s("c1df"),d=s.n(m),f=s("41cb"),h=s("ba6a"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",background:"rgba(160, 152, 152, 0.5)",left:"0",bottom:"0","z-index":"10"}},[s("div",{staticClass:"alertPopUp"},[s("div",{staticClass:"confirmMessage"},[t._t("confirmMessage")],2),s("div",{staticClass:"alert-controls"},[t._t("alert-controls")],2)])])},v=[],p={name:"alert"},b=p,y=(s("2f2f"),s("2877")),_=Object(y["a"])(b,g,v,!1,null,null,null),L=_.exports,S={name:"TeacherDisplay",components:{alert:L},data:function(){return{messages:[],roomInfos:[],welcomes:[],alerts:[],events:[],students:[],teacher:[],host:[],confirm:""}},mounted:function(){var t=this,e=this.$store.state.route.params.roomID;this.fetchRoomsById(e).then(function(){t.roomInfos.push(t.rooms),t.rooms[0].authorID===t.user.userID&&t.messages.push("You've joined ".concat(t.rooms[0].title)),"teacher"===t.user.role&&t.teacher.push(t.user)}),this.scrollToBottom()},computed:Object(l["a"])({},Object(u["e"])("authentication",["user"]),Object(u["e"])("rooms",["rooms"]),Object(u["c"])("authentication",["isLoggedIn","isConnected"])),beforeDestroy:function(){this.$socket.close()},sockets:{joiningEvent:function(t){console.log("data :",t.roomData);var e=t.roomData.roomName;console.log("room",e);var s={username:t.username,id:t.user_id,role:t.user_role},o=this.user.userID,n=t.user_id;console.log("logged user id",o),console.log("conncected user id",n),n!==o&&this.messages.push(t.message),"student"===s.role&&this.students.push(s)},leavingEvent:function(t){this.messages.push(t.message),this.students=this.students.filter(function(e){return e.id!==t.user_id})},roomCreation:function(t){console.log("room creation data",t),this.roomInfos.push(t)},event:function(t){var e=this;if(this.events.push({tag:t.color,timestamp:t.time,username:t.username}),"blue"===t.color){this.alerts.push(t.color);var s=d()(1e3*t.time).format("HH:mm:ss");console.log("time",s),this.messages.push("At ".concat(s,": ").concat(t.username," has a question ")),window.navigator.vibrate(2e3),setTimeout(this.resetAlerts(),6e3)}console.log("this alert tags()",this.alertTags()),console.log("this alerts",this.alerts),console.log(t),this.alertTags()&&this.alertTags().forEach(function(t){var s=e.alerts;s.push(t),e.playAudio(),window.navigator.vibrate(6e3),setTimeout(function(){e.resetAlerts(),e.pauseAudio()},6e3),e.events=e.events.filter(function(e){return e.tag!==t})})}},methods:Object(l["a"])({},Object(u["d"])("rooms",["setRooms"]),Object(u["b"])("rooms",["fetchRoomsById"]),{scrollToBottom:function(){var t=document.getElementById("chatbox");t.scrollTop=t.scrollHeight},alertTags:function(){var t=this;return["red"].filter(function(e){return t.events.filter(function(t){return c()()/1e3-t.timestamp<3e4}).filter(function(t){return t.tag===e}).length>t.students.length/2})},openConfirmModal:function(){this.confirm="Etes vous s√ªr de vouloir fermer ce cours ?"},closeConfirmModal:function(){this.confirm=""},closeRoom:function(){var t=this,e=this.$store.state.route.params.roomID,s=c()()/1e3,o=this.user.lastname,n=this.user.firstname;return this.$socket.emit("closeRoom",{userLastname:o,userFirstname:n}),Object(h["a"])().put("/rooms/".concat(e),{endClass:s}).then(function(e){console.log("data",e),200===e.status?(console.log("succes endclass",e.data.success),f["a"].push("/roomsList")):400===e.status&&console.log("error endclass",e.datat.errors),t.confirm=""})},resetAlerts:function(){var t=this.alerts;console.log("reset this alerts",t),console.log("setime out"),t.splice(0,1)},playAudio:function(){var t=document.getElementById("audio");t.play()},pauseAudio:function(){var t=document.getElementById("audio");t.pause(),t.currentTime=0}})},T=S,C=(s("21fb"),Object(y["a"])(T,r,a,!1,null,"1190c006",null)),x=C.exports,M={components:{TeacherDisplay:x},name:"Teacher"},k=M,w=Object(y["a"])(k,o,n,!1,null,null,null);e["default"]=w.exports},"06bf":function(t,e,s){t.exports=s.p+"media/Wrong-alert-beep-sound.579e2f7c.mp3"},"21fb":function(t,e,s){"use strict";var o=s("e3e8"),n=s.n(o);n.a},"2f2f":function(t,e,s){"use strict";var o=s("c4bf"),n=s.n(o);n.a},ac6a:function(t,e,s){for(var o=s("cadf"),n=s("0d58"),r=s("2aba"),a=s("7726"),i=s("32e9"),c=s("84f2"),l=s("2b4c"),u=l("iterator"),m=l("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(f),g=0;g<h.length;g++){var v,p=h[g],b=f[p],y=a[p],_=y&&y.prototype;if(_&&(_[u]||i(_,u,d),_[m]||i(_,m,p),c[p]=d,b))for(v in o)_[v]||r(_,v,o[v],!0)}},c4bf:function(t,e,s){},e3e8:function(t,e,s){}}]);
//# sourceMappingURL=chunk-141c32bb.25d151d9.js.map